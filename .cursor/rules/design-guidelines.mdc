---
globs: src/components/**,src/pages/**,*.vue
description: UI/UX 设计规范与交互设计约束
---
# 设计规范约束

## 设计原则

### 核心原则
1. **一致性**: 保持视觉和交互的一致性，使用统一的设计系统
2. **可用性**: 优先考虑用户体验，确保界面直观易用
3. **可访问性**: 遵循 WCAG 2.1 标准，确保所有用户都能使用
4. **响应式**: 适配不同设备和屏幕尺寸
5. **性能**: 优化加载速度和交互响应

### 设计系统
- 使用统一的设计令牌（颜色、字体、间距、圆角等）
- 遵循既定的组件库规范
- 保持视觉层次清晰

## 视觉设计规范

### 颜色系统
```scss
// 主色调
$primary-color: #3b82f6;      // 主要操作、链接
$secondary-color: #64748b;    // 次要操作
$success-color: #10b981;      // 成功状态
$warning-color: #f59e0b;      // 警告状态
$error-color: #ef4444;        // 错误状态
$info-color: #3b82f6;         // 信息提示

// 中性色
$text-primary: #1e293b;       // 主要文本
$text-secondary: #64748b;     // 次要文本
$text-muted: #94a3b8;         // 辅助文本
$border-color: #e2e8f0;       // 边框颜色
$background-base: #ffffff;    // 背景色
$background-surface: #f8fafc; // 表面背景
```

### 字体系统
```scss
// 字体族
$font-family-base: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
$font-family-mono: 'Fira Code', 'Consolas', monospace;

// 字号
$font-size-xs: 12px;    // 辅助信息
$font-size-sm: 14px;    // 次要文本
$font-size-base: 16px;  // 正文
$font-size-lg: 18px;    // 强调文本
$font-size-xl: 20px;    // 小标题
$font-size-2xl: 24px;   // 标题
$font-size-3xl: 30px;   // 大标题

// 字重
$font-weight-normal: 400;
$font-weight-medium: 500;
$font-weight-semibold: 600;
$font-weight-bold: 700;

// 行高
$line-height-tight: 1.25;
$line-height-normal: 1.5;
$line-height-relaxed: 1.75;
```

### 间距系统
```scss
// 使用 4px 基础单位的间距系统
$spacing-xs: 4px;   // 极小间距
$spacing-sm: 8px;   // 小间距
$spacing-md: 16px;  // 中等间距
$spacing-lg: 24px;  // 大间距
$spacing-xl: 32px;  // 超大间距
$spacing-2xl: 48px; // 特大间距
```

### 圆角系统
```scss
$radius-sm: 4px;   // 小圆角（按钮、标签）
$radius-md: 8px;   // 中等圆角（卡片、输入框）
$radius-lg: 12px;  // 大圆角（模态框、面板）
$radius-full: 9999px; // 完全圆角（头像、徽章）
```

### 阴影系统
```scss
$shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
$shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
$shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
$shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
```

## 组件设计规范

### 按钮组件
```vue
<template>
  <!-- ✅ 推荐：使用语义化的按钮类型和尺寸 -->
  <button class="btn btn--primary btn--md">
    主要操作
  </button>
  
  <button class="btn btn--secondary btn--sm">
    次要操作
  </button>
  
  <!-- ✅ 推荐：提供明确的加载和禁用状态 -->
  <button 
    class="btn btn--primary" 
    :disabled="isLoading"
    :aria-busy="isLoading"
  >
    <span v-if="isLoading" class="btn__spinner" aria-hidden="true"></span>
    {{ isLoading ? '加载中...' : '提交' }}
  </button>
</template>

<style scoped lang="scss">
.btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: $spacing-sm $spacing-md;
  border: none;
  border-radius: $radius-md;
  font-size: $font-size-base;
  font-weight: $font-weight-medium;
  cursor: pointer;
  transition: all 0.2s ease;
  
  // 最小触摸目标尺寸（移动端）
  min-height: 44px;
  min-width: 44px;
  
  &--primary {
    background-color: $primary-color;
    color: white;
    
    &:hover:not(:disabled) {
      background-color: darken($primary-color, 10%);
    }
  }
  
  &--disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }
}
</style>
```

### 表单组件
```vue
<template>
  <!-- ✅ 推荐：提供清晰的标签和错误提示 -->
  <div class="form-field">
    <label for="email" class="form-field__label">
      邮箱地址
      <span class="form-field__required" aria-label="必填">*</span>
    </label>
    <input
      id="email"
      v-model="email"
      type="email"
      class="form-field__input"
      :class="{ 'form-field__input--error': hasError }"
      :aria-invalid="hasError"
      :aria-describedby="hasError ? 'email-error' : undefined"
      placeholder="请输入邮箱地址"
      required
    >
    <p v-if="hasError" id="email-error" class="form-field__error" role="alert">
      {{ errorMessage }}
    </p>
  </div>
</template>

<style scoped lang="scss">
.form-field {
  margin-bottom: $spacing-md;
  
  &__label {
    display: block;
    margin-bottom: $spacing-xs;
    font-size: $font-size-sm;
    font-weight: $font-weight-medium;
    color: $text-primary;
  }
  
  &__input {
    width: 100%;
    padding: $spacing-sm $spacing-md;
    border: 1px solid $border-color;
    border-radius: $radius-md;
    font-size: $font-size-base;
    transition: border-color 0.2s ease;
    
    &:focus {
      outline: none;
      border-color: $primary-color;
      box-shadow: 0 0 0 3px rgba($primary-color, 0.1);
    }
    
    &--error {
      border-color: $error-color;
    }
  }
  
  &__error {
    margin-top: $spacing-xs;
    font-size: $font-size-sm;
    color: $error-color;
  }
}
</style>
```

### 卡片组件
```vue
<template>
  <!-- ✅ 推荐：使用语义化的卡片结构 -->
  <article class="card">
    <header class="card__header">
      <h3 class="card__title">{{ title }}</h3>
      <p v-if="subtitle" class="card__subtitle">{{ subtitle }}</p>
    </header>
    <div class="card__body">
      <slot />
    </div>
    <footer v-if="$slots.footer" class="card__footer">
      <slot name="footer" />
    </footer>
  </article>
</template>

<style scoped lang="scss">
.card {
  background: $background-base;
  border: 1px solid $border-color;
  border-radius: $radius-lg;
  box-shadow: $shadow-sm;
  overflow: hidden;
  transition: box-shadow 0.2s ease;
  
  &:hover {
    box-shadow: $shadow-md;
  }
  
  &__header {
    padding: $spacing-lg;
    border-bottom: 1px solid $border-color;
  }
  
  &__title {
    margin: 0 0 $spacing-xs 0;
    font-size: $font-size-lg;
    font-weight: $font-weight-semibold;
    color: $text-primary;
  }
  
  &__body {
    padding: $spacing-lg;
  }
  
  &__footer {
    padding: $spacing-md $spacing-lg;
    border-top: 1px solid $border-color;
    background: $background-surface;
  }
}
</style>
```

## 交互设计规范

### 状态反馈
```vue
<template>
  <!-- ✅ 推荐：提供明确的交互状态反馈 -->
  <button
    class="interactive-button"
    :class="{
      'interactive-button--hover': isHovered,
      'interactive-button--active': isActive,
      'interactive-button--focus': isFocused
    }"
    @mouseenter="isHovered = true"
    @mouseleave="isHovered = false"
    @mousedown="isActive = true"
    @mouseup="isActive = false"
    @focus="isFocused = true"
    @blur="isFocused = false"
  >
    交互按钮
  </button>
</template>

<script setup lang="ts">
import { ref } from 'vue'

const isHovered = ref(false)
const isActive = ref(false)
const isFocused = ref(false)
</script>

<style scoped lang="scss">
.interactive-button {
  transition: all 0.2s ease;
  
  &:hover {
    transform: translateY(-1px);
    box-shadow: $shadow-md;
  }
  
  &:active {
    transform: translateY(0);
    box-shadow: $shadow-sm;
  }
  
  &:focus-visible {
    outline: 2px solid $primary-color;
    outline-offset: 2px;
  }
}
</style>
```

### 加载状态
```vue
<template>
  <!-- ✅ 推荐：使用骨架屏或加载指示器 -->
  <div v-if="isLoading" class="skeleton">
    <div class="skeleton__header"></div>
    <div class="skeleton__line"></div>
    <div class="skeleton__line skeleton__line--short"></div>
  </div>
  
  <div v-else class="content">
    <!-- 实际内容 -->
  </div>
</template>

<style scoped lang="scss">
.skeleton {
  padding: $spacing-lg;
  
  &__header {
    width: 60%;
    height: 24px;
    background: linear-gradient(
      90deg,
      $background-surface 25%,
      lighten($background-surface, 5%) 50%,
      $background-surface 75%
    );
    background-size: 200% 100%;
    border-radius: $radius-md;
    animation: shimmer 1.5s infinite;
    margin-bottom: $spacing-md;
  }
  
  &__line {
    height: 16px;
    background: linear-gradient(
      90deg,
      $background-surface 25%,
      lighten($background-surface, 5%) 50%,
      $background-surface 75%
    );
    background-size: 200% 100%;
    border-radius: $radius-sm;
    margin-bottom: $spacing-sm;
    animation: shimmer 1.5s infinite;
    
    &--short {
      width: 80%;
    }
  }
}

@keyframes shimmer {
  0% {
    background-position: -200% 0;
  }
  100% {
    background-position: 200% 0;
  }
}
</style>
```

### 错误处理
```vue
<template>
  <!-- ✅ 推荐：提供清晰的错误提示和恢复方案 -->
  <div v-if="hasError" class="error-state" role="alert">
    <div class="error-state__icon" aria-hidden="true">⚠️</div>
    <div class="error-state__content">
      <h3 class="error-state__title">加载失败</h3>
      <p class="error-state__message">{{ errorMessage }}</p>
      <button class="error-state__retry" @click="handleRetry">
        重试
      </button>
    </div>
  </div>
</template>

<style scoped lang="scss">
.error-state {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: $spacing-xl;
  text-align: center;
  
  &__icon {
    font-size: 48px;
    margin-bottom: $spacing-md;
  }
  
  &__title {
    margin: 0 0 $spacing-sm 0;
    font-size: $font-size-lg;
    font-weight: $font-weight-semibold;
    color: $text-primary;
  }
  
  &__message {
    margin: 0 0 $spacing-lg 0;
    color: $text-secondary;
  }
}
</style>
```

## 响应式设计规范

### 断点系统
```scss
// 移动优先的断点设计
$breakpoint-sm: 640px;   // 小屏设备（手机）
$breakpoint-md: 768px;   // 中等设备（平板）
$breakpoint-lg: 1024px;  // 大屏设备（桌面）
$breakpoint-xl: 1280px;  // 超大屏设备
$breakpoint-2xl: 1536px; // 超超大屏设备
```

### 响应式布局
```vue
<template>
  <!-- ✅ 推荐：使用响应式网格布局 -->
  <div class="responsive-grid">
    <div class="responsive-grid__item" v-for="item in items" :key="item.id">
      <!-- 内容 -->
    </div>
  </div>
</template>

<style scoped lang="scss">
.responsive-grid {
  display: grid;
  gap: $spacing-md;
  
  // 移动端：单列
  grid-template-columns: 1fr;
  
  // 平板端：两列
  @media (min-width: $breakpoint-md) {
    grid-template-columns: repeat(2, 1fr);
  }
  
  // 桌面端：三列
  @media (min-width: $breakpoint-lg) {
    grid-template-columns: repeat(3, 1fr);
  }
  
  // 大屏：四列
  @media (min-width: $breakpoint-xl) {
    grid-template-columns: repeat(4, 1fr);
  }
}
</style>
```

### 响应式字体
```scss
// 使用 clamp() 实现响应式字体
.responsive-text {
  font-size: clamp(14px, 2vw, 18px);
  line-height: clamp(1.5, 2vw, 1.75);
}
```

## 无障碍设计规范

### 语义化 HTML
```vue
<template>
  <!-- ✅ 推荐：使用语义化标签 -->
  <header class="page-header">
    <nav class="main-nav" aria-label="主导航">
      <ul>
        <li><a href="/">首页</a></li>
        <li><a href="/about">关于</a></li>
      </ul>
    </nav>
  </header>
  
  <main>
    <article>
      <h1>文章标题</h1>
      <p>文章内容...</p>
    </article>
  </main>
  
  <footer class="page-footer">
    <p>&copy; 2024 公司名称</p>
  </footer>
</template>
```

### ARIA 属性
```vue
<template>
  <!-- ✅ 推荐：正确使用 ARIA 属性 -->
  <button
    :aria-label="isExpanded ? '收起菜单' : '展开菜单'"
    :aria-expanded="isExpanded"
    @click="toggleMenu"
  >
    <span aria-hidden="true">{{ isExpanded ? '−' : '+' }}</span>
  </button>
  
  <div
    v-show="isExpanded"
    role="menu"
    :aria-labelledby="menuButtonId"
  >
    <button role="menuitem">选项 1</button>
    <button role="menuitem">选项 2</button>
  </div>
</template>
```

### 键盘导航
```vue
<template>
  <!-- ✅ 推荐：支持键盘导航 -->
  <div
    class="dropdown"
    @keydown.escape="closeDropdown"
    @keydown.arrow-down.prevent="navigateNext"
    @keydown.arrow-up.prevent="navigatePrev"
    @keydown.enter.prevent="selectItem"
  >
    <!-- 下拉菜单内容 -->
  </div>
</template>
```

### 颜色对比度
```scss
// ✅ 推荐：确保文本与背景的对比度符合 WCAG AA 标准
// 正常文本：至少 4.5:1
// 大文本（18pt+ 或 14pt+ 粗体）：至少 3:1

.text-primary {
  color: $text-primary; // 在白色背景上对比度 > 4.5:1
}

.text-muted {
  color: $text-muted; // 在白色背景上对比度 > 4.5:1
}
```

## 性能优化规范

### 图片优化
```vue
<template>
  <!-- ✅ 推荐：使用现代图片格式和懒加载 -->
  <img
    :src="imageUrl"
    :alt="imageAlt"
    loading="lazy"
    decoding="async"
    :width="imageWidth"
    :height="imageHeight"
  >
  
  <!-- ✅ 推荐：使用 picture 元素提供多种格式 -->
  <picture>
    <source srcset="image.avif" type="image/avif">
    <source srcset="image.webp" type="image/webp">
    <img src="image.jpg" alt="描述" loading="lazy">
  </picture>
</template>
```

### 动画性能
```scss
// ✅ 推荐：使用 transform 和 opacity 实现动画（GPU 加速）
.animated-element {
  transition: transform 0.3s ease, opacity 0.3s ease;
  
  &:hover {
    transform: translateY(-4px);
    opacity: 0.9;
  }
}

// ❌ 避免：使用会触发重排的属性
.bad-animation {
  transition: width 0.3s ease, height 0.3s ease; // 会触发重排
}
```

## 最佳实践

### 设计一致性
- 使用统一的设计令牌（颜色、字体、间距）
- 遵循既定的组件库规范
- 保持视觉层次清晰
- 统一交互模式

### 用户体验
- 提供明确的反馈和状态指示
- 优化加载和错误状态
- 确保关键操作易于访问
- 支持键盘导航

### 可访问性
- 使用语义化 HTML
- 提供适当的 ARIA 属性
- 确保颜色对比度符合标准
- 支持屏幕阅读器

### 响应式设计
- 移动优先的设计方法
- 使用灵活的布局系统
- 适配不同屏幕尺寸
- 优化触摸目标尺寸（最小 44x44px）

### 性能优化
- 优化图片和资源加载
- 使用 CSS 动画而非 JavaScript
- 避免不必要的重排和重绘
- 实现懒加载和代码分割